{"version":3,"file":"main-DHYNmzWl.js","sources":["../../src/main.js"],"sourcesContent":["// Ждем полной загрузки страницы (картинки, шрифты, стили), \n// чтобы GSAP правильно рассчитал высоту\nwindow.addEventListener(\"load\", () => {\n\n    console.log(\"Page Loaded. Initializing Zyntra Core...\");\n\n    // ------------------------------------------------\n    // 1. БЕЗОПАСНАЯ ПРОВЕРКА БИБЛИОТЕК\n    // ------------------------------------------------\n    const isGsapLoaded = typeof gsap !== \"undefined\" && typeof ScrollTrigger !== \"undefined\";\n    const isLenisLoaded = typeof Lenis !== \"undefined\";\n\n    if (!isGsapLoaded) {\n        console.error(\"CRITICAL: GSAP или ScrollTrigger не подключены!\");\n        return;\n    }\n\n    gsap.registerPlugin(ScrollTrigger);\n    if (typeof lucide !== \"undefined\") lucide.createIcons();\n\n    // ------------------------------------------------\n    // 2. НАСТРОЙКА LENIS + GSAP (СВЯЗКА)\n    // ------------------------------------------------\n    let lenis;\n    if (isLenisLoaded) {\n        lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            direction: 'vertical',\n            smooth: true,\n        });\n\n        // Связываем Lenis и ScrollTrigger\n        lenis.on('scroll', ScrollTrigger.update);\n\n        gsap.ticker.add((time) => {\n            lenis.raf(time * 1000);\n        });\n\n        gsap.ticker.lagSmoothing(0);\n        \n        console.log(\"Lenis Smooth Scroll: Active\");\n    }\n\n    // ------------------------------------------------\n    // 3. АНИМАЦИИ (GSAP)\n    // ------------------------------------------------\n\n    // 3.1 HERO (Играет сразу, без скролла)\n    const heroTl = gsap.timeline({ defaults: { ease: \"power3.out\" } });\n    if (document.querySelector('.hero__title')) {\n        heroTl.from(\".hero__badge\", { y: -20, opacity: 0, duration: 0.8 })\n              .from(\".hero__title\", { y: 50, opacity: 0, duration: 1 }, \"-=0.4\")\n              .from(\".hero__desc\", { y: 30, opacity: 0, duration: 0.8 }, \"-=0.6\")\n              .from(\".hero__actions .btn\", { y: 20, opacity: 0, duration: 0.6, stagger: 0.2 }, \"-=0.6\")\n              .from(\".hero__visual\", { scale: 0.8, opacity: 0, duration: 1.2, ease: \"back.out(1.7)\" }, \"-=1\");\n    }\n\n    // 3.2 ЗАГОЛОВКИ СЕКЦИЙ (Простой триггер)\n    // Используем batch, чтобы не создавать 100 отдельных триггеров\n    ScrollTrigger.batch(\".section__title\", {\n        onEnter: batch => gsap.to(batch, { opacity: 1, y: 0, duration: 0.8, stagger: 0.15, overwrite: true }),\n        start: \"top 85%\",\n    });\n    // Устанавливаем начальное состояние через CSS или set, чтобы избежать мигания\n    gsap.set(\".section__title\", { opacity: 0, y: 50 });\n\n\n    // 3.3 ПРЕИМУЩЕСТВА (Benefits)\n    // Принудительно проверяем наличие элементов\n    const benefits = document.querySelectorAll(\".benefit-card\");\n    if (benefits.length > 0) {\n        gsap.set(benefits, { opacity: 0, y: 60 }); // Скрываем сразу\n        \n        ScrollTrigger.batch(benefits, {\n            start: \"top 85%\",\n            onEnter: batch => gsap.to(batch, {\n                opacity: 1, \n                y: 0, \n                duration: 0.8, \n                stagger: 0.2, \n                ease: \"power3.out\",\n                overwrite: true \n            })\n        });\n    }\n\n    // 3.4 БЛОГ\n    const posts = document.querySelectorAll(\".blog-card\");\n    if (posts.length > 0) {\n        gsap.set(posts, { opacity: 0, y: 60 });\n\n        ScrollTrigger.batch(posts, {\n            start: \"top 85%\",\n            onEnter: batch => gsap.to(batch, {\n                opacity: 1, \n                y: 0, \n                duration: 0.8, \n                stagger: 0.2, \n                ease: \"power3.out\"\n            })\n        });\n    }\n\n    // 3.5 КЕЙСЫ (Горизонтальный скролл)\n    const casesSection = document.querySelector(\".cases\");\n    const casesTrack = document.querySelector(\".cases__track\");\n    \n    if (casesSection && casesTrack) {\n        let mm = gsap.matchMedia();\n\n        mm.add(\"(min-width: 992px)\", () => {\n            const scrollAmount = casesTrack.scrollWidth - window.innerWidth;\n            \n            gsap.to(casesTrack, {\n                x: -scrollAmount,\n                ease: \"none\",\n                scrollTrigger: {\n                    trigger: \".cases\", // Триггер - сама секция\n                    pin: true,         // Закрепляем её\n                    scrub: 1,          // Связь со скроллом\n                    start: \"top top\",  // Начинаем, когда верх секции касается верха экрана\n                    end: () => `+=${casesTrack.scrollWidth}`, // Длина скролла\n                    invalidateOnRefresh: true\n                }\n            });\n        });\n    }\n\n    // ------------------------------------------------\n    // 4. UI И ФУНКЦИОНАЛ\n    // ------------------------------------------------\n\n    // Год\n    const yearSpan = document.getElementById('year');\n    if (yearSpan) yearSpan.textContent = new Date().getFullYear();\n\n    // Мобильное меню\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    const navLinks = document.querySelectorAll('.header__link');\n    const burgerIcon = burger?.querySelector('i');\n\n    if (burger && nav) {\n        burger.addEventListener('click', () => {\n            const isActive = nav.classList.toggle('active');\n            document.body.style.overflow = isActive ? 'hidden' : '';\n            if (burgerIcon) {\n                burgerIcon.setAttribute('data-lucide', isActive ? 'x' : 'menu');\n                lucide.createIcons();\n            }\n        });\n\n        navLinks.forEach(link => {\n            link.addEventListener('click', () => {\n                nav.classList.remove('active');\n                document.body.style.overflow = '';\n                if (burgerIcon) {\n                    burgerIcon.setAttribute('data-lucide', 'menu');\n                    lucide.createIcons();\n                }\n            });\n        });\n    }\n\n    // Cookie Popup\n    const cookiePopup = document.getElementById('cookiePopup');\n    const acceptBtn = document.getElementById('acceptCookies');\n    if (cookiePopup && !localStorage.getItem('zyntra_cookies_accepted')) {\n        setTimeout(() => cookiePopup.classList.add('show'), 2000);\n    }\n    if (acceptBtn) {\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('zyntra_cookies_accepted', 'true');\n            if (cookiePopup) cookiePopup.classList.remove('show');\n        });\n    }\n\n    // Форма и Капча\n    const form = document.getElementById('contactForm');\n    const msgBox = document.getElementById('formMessage');\n    const cQ = document.getElementById('captchaQuestion');\n    const cA = document.getElementById('captchaAnswer');\n    \n    let n1 = Math.floor(Math.random() * 10), n2 = Math.floor(Math.random() * 10);\n    if(cQ) cQ.textContent = `${n1} + ${n2} = ?`;\n\n    if (form) {\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            let isValid = true;\n            document.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));\n\n            // Валидация\n            const ph = form.querySelector('input[name=\"phone\"]');\n            if(ph && !/^\\d+$/.test(ph.value)) { ph.closest('.form-group').classList.add('error'); isValid = false; }\n            \n            if(cA && parseInt(cA.value) !== (n1 + n2)) {\n                cA.closest('.form-group').classList.add('error'); isValid = false;\n                n1 = Math.floor(Math.random()*10); n2 = Math.floor(Math.random()*10);\n                cQ.textContent = `${n1} + ${n2} = ?`; cA.value='';\n            }\n\n            const nm = form.querySelector('input[name=\"name\"]');\n            if(nm && !nm.value.trim()) { nm.closest('.form-group').classList.add('error'); isValid = false; }\n\n            if (isValid) {\n                const btn = form.querySelector('button');\n                const orig = btn.innerText;\n                btn.innerText = 'Отправка...'; btn.style.opacity = '0.7';\n                setTimeout(() => {\n                    form.reset();\n                    n1 = Math.floor(Math.random()*10); n2 = Math.floor(Math.random()*10);\n                    if(cQ) cQ.textContent = `${n1} + ${n2} = ?`;\n                    btn.innerText = orig; btn.style.opacity = '1';\n                    if(msgBox) {\n                        msgBox.textContent = 'Успешно!'; msgBox.classList.add('success');\n                        setTimeout(() => { msgBox.textContent=''; msgBox.classList.remove('success');}, 4000);\n                    }\n                }, 1000);\n            }\n        });\n    }\n\n    // ------------------------------------------------\n    // 5. ФИНАЛЬНЫЙ РЕФРЕШ\n    // ------------------------------------------------\n    // Принудительно пересчитываем все позиции триггеров\n    ScrollTrigger.refresh();\n    console.log(\"GSAP Triggers Refreshed\");\n\n});"],"names":["isGsapLoaded","isLenisLoaded","lenis","time","heroTl","batch","benefits","posts","casesSection","casesTrack","scrollAmount","yearSpan","burger","nav","navLinks","burgerIcon","isActive","link","cookiePopup","acceptBtn","form","msgBox","cQ","cA","n1","n2","e","isValid","g","ph","nm","btn","orig"],"mappings":"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"}