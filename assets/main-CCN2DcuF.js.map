{"version":3,"file":"main-CCN2DcuF.js","sources":["../../src/main.js"],"sourcesContent":["// Ждем полной загрузки страницы (картинки, шрифты, стили), \n// чтобы GSAP правильно рассчитал высоту\nwindow.addEventListener(\"load\", () => {\n\n    // --- 1. ПРОВЕРКА БИБЛИОТЕК ---\n    const isGsapLoaded = typeof gsap !== \"undefined\" && typeof ScrollTrigger !== \"undefined\";\n    const isLenisLoaded = typeof Lenis !== \"undefined\";\n\n    if (!isGsapLoaded) {\n        console.error(\"CRITICAL: GSAP или ScrollTrigger не подключены!\");\n        return;\n    }\n\n    gsap.registerPlugin(ScrollTrigger);\n    if (typeof lucide !== \"undefined\") lucide.createIcons();\n\n    // --- 2. НАСТРОЙКА LENIS + GSAP (СВЯЗКА) ---\n    let lenis;\n    if (isLenisLoaded) {\n        lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            direction: 'vertical',\n            smooth: true,\n        });\n\n        // Связываем Lenis и ScrollTrigger\n        lenis.on('scroll', ScrollTrigger.update);\n\n        function raf(time) {\n            lenis.raf(time);\n            requestAnimationFrame(raf);\n        }\n        requestAnimationFrame(raf);\n        \n        gsap.ticker.add((time) => { lenis.raf(time * 1000); });\n        gsap.ticker.lagSmoothing(0);\n    }\n\n    // --- 3. АНИМАЦИИ (GSAP) ---\n\n    // 3.1 HERO (Играет сразу, без скролла)\n    const heroTl = gsap.timeline({ defaults: { ease: \"power3.out\" } });\n    \n    if (document.querySelector('.hero__title')) {\n        heroTl.from(\".hero__badge\", { y: -20, opacity: 0, duration: 0.8 })\n              .from(\".hero__title\", { y: 50, opacity: 0, duration: 1 }, \"-=0.4\")\n              .from(\".hero__desc\", { y: 30, opacity: 0, duration: 0.8 }, \"-=0.6\")\n              .from(\".hero__actions .btn\", { y: 20, opacity: 0, duration: 0.6, stagger: 0.2 }, \"-=0.6\")\n              .from(\".hero__visual\", { scale: 0.8, opacity: 0, duration: 1.2, ease: \"back.out(1.7)\" }, \"-=1\");\n    }\n\n    // 3.2 ЗАГОЛОВКИ СЕКЦИЙ\n    ScrollTrigger.batch(\".section__title\", {\n        onEnter: batch => gsap.to(batch, { opacity: 1, y: 0, duration: 0.8, stagger: 0.15, overwrite: true }),\n        start: \"top 85%\",\n    });\n    gsap.set(\".section__title\", { opacity: 0, y: 50 });\n\n\n    // 3.3 ПРЕИМУЩЕСТВА (Benefits)\n    const benefits = document.querySelectorAll(\".benefit-card\");\n    if (benefits.length > 0) {\n        gsap.set(benefits, { opacity: 0, y: 60 });\n        \n        ScrollTrigger.batch(benefits, {\n            start: \"top 85%\",\n            onEnter: batch => gsap.to(batch, {\n                opacity: 1, \n                y: 0, \n                duration: 0.8, \n                stagger: 0.2, \n                ease: \"power3.out\",\n                overwrite: true \n            })\n        });\n    }\n\n    // 3.4 БЛОГ\n    const posts = document.querySelectorAll(\".blog-card\");\n    if (posts.length > 0) {\n        gsap.set(posts, { opacity: 0, y: 60 });\n\n        ScrollTrigger.batch(posts, {\n            start: \"top 85%\",\n            onEnter: batch => gsap.to(batch, {\n                opacity: 1, \n                y: 0, \n                duration: 0.8, \n                stagger: 0.2, \n                ease: \"power3.out\"\n            })\n        });\n    }\n\n    // 3.5 КЕЙСЫ (Горизонтальный скролл)\n    const casesSection = document.querySelector(\".cases\");\n    const casesTrack = document.querySelector(\".cases__track\");\n    \n    if (casesSection && casesTrack) {\n        let mm = gsap.matchMedia();\n\n        mm.add(\"(min-width: 992px)\", () => {\n            const scrollAmount = casesTrack.scrollWidth - window.innerWidth;\n\n            gsap.to(casesTrack, {\n                x: -scrollAmount,\n                ease: \"none\",\n                scrollTrigger: {\n                    trigger: \".cases\",\n                    pin: true,\n                    scrub: 1,\n                    start: \"top top\",\n                    end: () => `+=${casesTrack.scrollWidth}`,\n                    invalidateOnRefresh: true\n                }\n            });\n        });\n    }\n\n    // --- 4. UI И ФУНКЦИОНАЛ ---\n\n    // Год\n    const yearSpan = document.getElementById('year');\n    if (yearSpan) yearSpan.textContent = new Date().getFullYear();\n\n    // Мобильное меню\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    const navLinks = document.querySelectorAll('.header__link');\n    const burgerIcon = burger?.querySelector('i');\n\n    if (burger && nav) {\n        burger.addEventListener('click', () => {\n            const isActive = nav.classList.toggle('active');\n            document.body.style.overflow = isActive ? 'hidden' : '';\n            if (burgerIcon) {\n                burgerIcon.setAttribute('data-lucide', isActive ? 'x' : 'menu');\n                lucide.createIcons();\n            }\n        });\n\n        navLinks.forEach(link => {\n            link.addEventListener('click', () => {\n                nav.classList.remove('active');\n                document.body.style.overflow = '';\n                if (burgerIcon) {\n                    burgerIcon.setAttribute('data-lucide', 'menu');\n                    lucide.createIcons();\n                }\n            });\n        });\n    }\n\n    // Cookie Popup\n    const cookiePopup = document.getElementById('cookiePopup');\n    const acceptBtn = document.getElementById('acceptCookies');\n    \n    if (cookiePopup && !localStorage.getItem('zyntra_cookies_accepted')) {\n        setTimeout(() => cookiePopup.classList.add('show'), 2000);\n    }\n    if (acceptBtn) {\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('zyntra_cookies_accepted', 'true');\n            if (cookiePopup) cookiePopup.classList.remove('show');\n        });\n    }\n\n    // 5.2 Контактная форма (Добавлен чекбокс)\n    const form = document.getElementById('contactForm');\n    const messageBox = document.getElementById('formMessage');\n    const consentCheckbox = document.getElementById('consent'); // <-- Чекбокс\n    const captchaQ = document.getElementById('captchaQuestion');\n    const captchaA = document.getElementById('captchaAnswer');\n    \n    let n1 = Math.floor(Math.random() * 10), n2 = Math.floor(Math.random() * 10);\n    if (captchaQ) captchaQ.textContent = `${n1} + ${n2} = ?`;\n\n    if (form) {\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            let isValid = true;\n            document.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));\n\n            // 1. Валидация телефона\n            const phone = form.querySelector('input[name=\"phone\"]');\n            if (phone && !/^\\d+$/.test(phone.value)) {\n                phone.closest('.form-group').classList.add('error');\n                isValid = false;\n            }\n\n            // 2. Валидация Капчи\n            if (captchaA && parseInt(captchaA.value) !== (n1 + n2)) {\n                captchaA.closest('.form-group').classList.add('error');\n                isValid = false;\n                n1 = Math.floor(Math.random() * 10);\n                n2 = Math.floor(Math.random() * 10);\n                if (captchaQ) captchaQ.textContent = `${n1} + ${n2} = ?`;\n                captchaA.value = '';\n            }\n\n            // 3. Валидация Имени\n            const name = form.querySelector('input[name=\"name\"]');\n            if (name && !name.value.trim()) {\n                name.closest('.form-group').classList.add('error');\n                isValid = false;\n            }\n            \n            // 4. Валидация ЧЕКБОКСА (Новая логика)\n            if (consentCheckbox && !consentCheckbox.checked) {\n                consentCheckbox.closest('.checkbox-group').classList.add('error');\n                isValid = false;\n            }\n\n            if (isValid) {\n                const btn = form.querySelector('button[type=\"submit\"]');\n                const btnText = btn.querySelector('.btn-text');\n                const originalText = btnText.textContent;\n                \n                btnText.textContent = 'Отправка...';\n                btn.style.opacity = '0.7';\n\n                setTimeout(() => {\n                    form.reset();\n                    // Сброс капчи\n                    n1 = Math.floor(Math.random() * 10);\n                    n2 = Math.floor(Math.random() * 10);\n                    if (captchaQ) captchaQ.textContent = `${n1} + ${n2} = ?`;\n                    \n                    btnText.textContent = originalText;\n                    btn.style.opacity = '1';\n                    \n                    if(messageBox) {\n                        messageBox.textContent = 'Успешно!'; \n                        messageBox.classList.add('success');\n                        setTimeout(() => { messageBox.textContent=''; messageBox.classList.remove('success');}, 4000);\n                    }\n                }, 1000);\n            }\n        });\n    }\n\n    // ------------------------------------------------\n    // 5. ФИНАЛЬНЫЙ РЕФРЕШ\n    // ------------------------------------------------\n    ScrollTrigger.refresh();\n});"],"names":["isGsapLoaded","isLenisLoaded","lenis","raf","time","t","heroTl","batch","benefits","posts","casesSection","casesTrack","scrollAmount","yearSpan","burger","nav","navLinks","burgerIcon","isActive","link","cookiePopup","acceptBtn","form","messageBox","consentCheckbox","captchaQ","captchaA","n1","n2","e","isValid","g","phone","name","btn","btnText","originalText"],"mappings":"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"}